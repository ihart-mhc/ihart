package {	import flash.events.*;	import flash.net.URLLoader;	import flash.net.URLRequest;		//This class is responsible for walking through our array of nodes...	class QuestionDatabaseController {				var questionNodeArray:Array = new Array();		var questionIdx:int = 0;		var currentQuestion:QuestionNode;				var correctCount:int = 0;						var quizController:QuizController;				public function QuestionDatabaseController(xmlName:String, owner:QuizController){			quizController = owner;						//Given a XML file name, we make a database out of it (nifty, eh?)			var myLoader:URLLoader = new URLLoader();			myLoader.load(new URLRequest(xmlName + ".xml"));			myLoader.addEventListener(Event.COMPLETE, processXML);		}				private function processXML(e:Event):void {			//WE DON'T WANT TO DO ANYTHING UNTIL THIS IS DONE LOADING :/			var myXML = new XML(e.target.data);			this.questionNodeArray = QuestionNode.getQuestions(myXML);						//Set our first question...			currentQuestion = questionNodeArray[questionIdx];						quizController.initializeMainScreen();		}				public function numberOfQuestions():int {			return questionNodeArray.length;		}				public function nextQuestionTree():QuestionNode {			if (questionIdx < numberOfQuestions()){				++questionIdx;				return questionNodeArray[questionIdx];			}			else {				return null;			}		}				public function getQuestionText():String {			return currentQuestion.getQuestionText();		}				public function getButtonText(idx:int):String {			return currentQuestion.getButtonText(idx);		}				public function answerButtonClicked(id:int):void {			//Did they guess correctly?			var correct:Boolean = currentQuestion.isCorrectGuess(id);			if (correct == true){				++correctCount;			}						//Create/display the next screen			quizController.updateResultViewController(currentQuestion.getFact(), correct);		}				public function nextButtonClicked():void {			//Get the next question			currentQuestion = nextQuestionTree();							//Ok, update screen...			if (currentQuestion != null){				quizController.updateQuizView();			}			else {				//We're done				quizController.displayFinalScreen(correctCount);			}		}	}}